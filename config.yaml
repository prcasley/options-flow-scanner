# Options Flow Scanner Configuration

# Scan settings
scan_interval_seconds: 60

# Polygon.io free tier: 5 API calls per minute
rate_limit:
  calls_per_minute: 5
  retry_delay_seconds: 15
  max_retries: 3

# Detection thresholds
thresholds:
  volume_spike_multiplier: 5.0      # Volume must be Nx average to trigger
  min_volume: 100                    # Minimum absolute volume to consider
  min_oi: 50                         # Minimum open interest
  high_volume_oi_ratio: 3.0          # Volume/OI ratio threshold
  min_estimated_premium_usd: 50000   # Minimum premium to alert on ($50k)
  sweep_size_threshold: 100          # Contracts in a single trade to flag as sweep

# Risk scoring weights (1-5 scale)
risk_scoring:
  volume_spike_weight: 0.3
  premium_weight: 0.25
  oi_ratio_weight: 0.2
  sweep_weight: 0.15
  near_expiry_weight: 0.1

# Watchlist tickers (scan these every cycle)
watchlist:
  - SPY
  - QQQ
  - AAPL
  - MSFT
  - NVDA
  - TSLA
  - AMZN
  - META
  - GOOGL
  - AMD
  - AVGO
  - JPM
  - BAC
  - XLF
  - IWM
  - NFLX
  - CRM
  - COIN
  - MARA
  - SMCI

# Discovery mode: broad market scan via gainers/losers/most-active
discovery:
  enabled: true
  # Polygon snapshots endpoint pulls top movers automatically
  max_tickers: 50

# Market hours (ET)
market:
  open_hour: 9
  open_minute: 30
  close_hour: 16
  close_minute: 0
  timezone: "US/Eastern"

# Daily summary
daily_summary:
  enabled: true
  hour: 16
  minute: 15
  top_n: 10

# EMA (exponential moving average) settings for volume tracking
ema:
  alpha: 0.3                         # Smoothing factor (0-1)
  max_tracked_contracts: 10000       # Cap to prevent memory growth

# Logging
log_level: INFO
log_json: false                      # Set true for structured JSON logs (containers)
csv_log_path: "data/alerts.csv"
db_path: "data/signals.db"

# Health check HTTP server
health:
  host: "0.0.0.0"
  port: 8080
